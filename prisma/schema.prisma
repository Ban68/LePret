generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Lead {
  id            String       @id @default(cuid())
  createdAt     DateTime     @default(now())
  nit           String
  razonSocial   String?
  email         String
  telefono      String?
  ventasAnuales Int
  facturasMes   Int
  ticketPromedio Int
  source        String? // web, referral, ads
  consent       Boolean
  preapproval   Preapproval?
  @@unique([nit])
}

model Preapproval {
  id           String   @id @default(cuid())
  createdAt    DateTime @default(now())
  leadId       String   @unique
  lead         Lead     @relation(fields: [leadId], references: [id])
  cupoEstimado Int
  status       String // ESTIMADO | VERIFICACION | APROBADO | RECHAZADO
  notes        String?
}
